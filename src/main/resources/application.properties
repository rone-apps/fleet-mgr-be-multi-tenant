# ============================================
# JWT Configuration
# ============================================
jwt.secret=5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437772A462D4A614E645267556A586E3272357538782F413F4428472B4B6250655368
jwt.expiration=86400000

# ============================================
# Database Configuration - MySQL (RDS)
# ============================================

# Host MUST come from environment (Docker / ECS / EC2)
spring.datasource.url=jdbc:mysql://${MYSQL_HOST}:3306/fareflow?serverTimezone=UTC&useSSL=false&allowPublicKeyRetrieval=true

spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
# export MYSQL_HOST=rone2.ci2owkd8ejjp.us-west-2.rds.amazonaws.com
# export SPRING_DATASOURCE_USERNAME=hpooni1
# export SPRING_DATASOURCE_PASSWORD='!Inder101'

# #spring.jpa.hibernate.ddl-auto=update
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect
# #spring.jpa.generate-ddl=true
# #spring.rone.db.jdbc-url=jdbc:mysql://localhost:3306/rttaxidb
# #spring.rone.db.username=root
# #spring.rone.db.password=inder101
# spring.rone.db.jdbc-url=jdbc:mysql://rone.c2ixojr7mzet.us-west-2.rds.amazonaws.com:3306/rttaxidb?useSSL=false
# spring.rone.db.username=hpooni1
# spring.rone.db.password=!Inder101
# spring.rone.db.driver-class-name=com.mysql.cj.jdbc.Driver
# #spring.datasource.url=jdbc:mysql://localhost:3306/taxidb?useUnicode=true&userJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC

spring.cache.type=caffeine
spring.cache.cache-names=drivers_all,drivers_active,drivers_status,drivers_search,driver_by_id,driver_by_number
spring.cache.caffeine.spec=maximumSize=2000,expireAfterWrite=5m

# ============================================
# HikariCP (Connection Pool)
# ============================================
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.initialization-fail-timeout=60000

# ============================================
# JPA / Hibernate Configuration
# ============================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=true
spring.jpa.show-sql=false

# Let Hibernate auto-detect MySQL 8
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# ============================================
# Logging Configuration
# ============================================
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO
logging.level.com.taxi=WARN
logging.level.root=WARN

# ============================================
# Server Configuration
# ============================================
server.port=8080
server.servlet.context-path=/api

# ============================================
# File Upload Configuration
# ============================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
server.tomcat.max-swallow-size=-1

# ============================================
# Application Info
# ============================================
spring.application.name=FareFlow

# ============================================
# TaxiCaller Scheduled Import Configuration
# ============================================

# Enable/Disable automatic scheduled imports from TaxiCaller
# Set to 'true' to enable, 'false' to disable
taxicaller.scheduler.enabled=true

# Number of previous days to import (default: 1 = yesterday only)
# Examples:
# - 1 = Import yesterday's data only
# - 2 = Import last 2 days
# - 7 = Import last week
taxicaller.scheduler.import-previous-days=2

# Cron expression for when to run the import (default: 2:00 AM daily)
# Format: second minute hour day month weekday
# 
# Common schedules:
# - 0 0 2 * * *        = 2:00 AM every day (DEFAULT)
# - 0 0 3 * * *        = 3:00 AM every day
# - 0 30 1 * * *       = 1:30 AM every day
# - 0 0 23 * * *       = 11:00 PM every day
# - 0 0 1 * * MON-FRI  = 1:00 AM Monday-Friday only
# - 0 0 4 * * SUN      = 4:00 AM Sunday only (weekly)
taxicaller.scheduler.cron=0 0 2 * * *

# ============================================
# Examples for Different Schedules
# ============================================

# Run at 3:00 AM daily:
# taxicaller.scheduler.cron=0 0 3 * * *

# Run at 11:30 PM daily:
# taxicaller.scheduler.cron=0 30 23 * * *

# Run at 1:00 AM on weekdays only:
# taxicaller.scheduler.cron=0 0 1 * * MON-FRI

# Run at 4:00 AM every Sunday (weekly):
# taxicaller.scheduler.cron=0 0 4 * * SUN

# Run every hour at :15 past the hour:
# taxicaller.scheduler.cron=0 15 * * * *

# Run every 30 minutes:
# taxicaller.scheduler.cron=0 0/30 * * * *

# ============================================
# Logging Configuration (Optional)
# ============================================

# Set logging level for scheduler (optional)
logging.level.com.taxi.domain.taxicaller.scheduler=INFO

# ============================================
# Email Configuration (SMTP - Gmail)
# Uses environment variables for sensitive data
# ============================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Email sender display name
app.mail.sender-name=${SPRING_MAIL_SENDER_NAME:Maclures Cabs}
